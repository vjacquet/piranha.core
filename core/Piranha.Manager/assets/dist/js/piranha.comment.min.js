piranha.comment=new Vue({el:"#comments",data:{loading:!0,contentId:null,items:[],state:"all"},computed:{filteredItems:function(){var n=this;return this.items.filter(function(t){return"all"===n.state||("pending"===n.state?!t.isApproved:t.isApproved)})}},methods:{load:function(n){var t=this;n||(n=""),fetch(piranha.baseUrl+"manager/api/comment/"+n).then(function(n){return n.json()}).then(function(n){t.contentId=n.contentId,t.items=n.comments}).catch(function(n){console.log("error:",n)})},approve:function(n){var t=this;fetch(piranha.baseUrl+"manager/api/comment/approve/"+n+(null!=t.contentId?"/"+t.contentId:"")).then(function(n){return n.json()}).then(function(n){n.status&&piranha.notifications.push(n.status),t.contentId=n.contentId,t.items=n.comments}).catch(function(n){console.log("error:",n)})},unapprove:function(n){var t=this;fetch(piranha.baseUrl+"manager/api/comment/unapprove/"+n+(null!=t.contentId?"/"+t.contentId:"")).then(function(n){return n.json()}).then(function(n){n.status&&piranha.notifications.push(n.status),t.contentId=n.contentId,t.items=n.comments}).catch(function(n){console.log("error:",n)})},toggleApproved:function(n){n.isApproved=!n.isApproved,n.isApproved?this.approve(n.id):this.unapprove(n.id)},remove:function(n){var t=this;fetch(piranha.baseUrl+"manager/api/comment/delete/"+n+"/"+t.contentId).then(function(n){return n.json()}).then(function(n){piranha.notifications.push(n),t.load(t.contentId)}).catch(function(n){console.log("error:",n)})},setStatus:function(n){this.state=n}},updated:function(){this.loading=!1}});